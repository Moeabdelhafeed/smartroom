import{_ as k}from"./CkzSVsTr.js";import{s as d,l as D,k as C,m as N,r as p,u as S,f as G,c as a,a as e,b as T,w as M,g as V,n as q,h as o,i as x,p as P,q as b,j as B,v as O,t as R,o as r}from"./LEGjL14j.js";const j={class:"min-h-screen flex flex-col"},E={class:"container mx-auto p-4"},U={class:"flex"},z={class:"flex-1 flex-col flex items-center mt-30"},A=["disabled"],I={key:0,class:"text-warning text-lg mt-4"},L={key:1,class:"text-white text-lg mt-4"},W={class:"flex flex-col items-center mt-8"},F={key:0,class:"mt-2 text-green-400"},H={key:1,class:"mt-2 text-red-400"},J={class:"text-center m-3 mb-0"},K=["disabled"],Z={__name:"door",setup(Q){const{isOpen:i,password:f}=d(D()),{alarm:w}=d(C()),{useGasDoor:s}=d(N()),l=p(""),{publish:u}=S(),{topic:c}=d(G()),g=p(!0),h=async()=>{setTimeout(()=>{g.value=!1},3e3),u(c.value,"door/open")},_=m=>{u(c.value,m?"gas/door/on":"gas/door/off")},v=async()=>{u(c.value,"door/"+l.value)};return(m,t)=>{const y=k;return r(),a("div",j,[e("div",E,[e("div",U,[T(y,{to:"/dashboard"},{default:M(()=>t[3]||(t[3]=[e("h1",{class:"text-3xl font-bold mb-5 cursor-pointer"},[e("i",{class:"bi bi-arrow-left"})],-1)])),_:1}),t[4]||(t[4]=e("h1",{class:"text-3xl font-bold ms-5"},"Door",-1))]),t[5]||(t[5]=e("hr",null,null,-1))]),e("div",z,[e("button",{onClick:h,disabled:o(i),class:q(["relative btn border-0 flex items-center justify-center transition duration-300 w-50 h-50 transform font-bold text-2xl text-white p-4 rounded-full",o(i)?"bg-gray-500 shadow-none opacity-50 cursor-not-allowed":"bg-green-500 hover:shadow-lg hover:bg-green-600 cursor-pointer"])},t[6]||(t[6]=[e("i",{class:"bi bi-power text-6xl font-bold"},null,-1)]),10,A),o(i)&&o(w)&&o(s)?(r(),a("p",I," WARNING: Door is open! Gas is detected! ")):o(i)?(r(),a("p",L," Door will be closed automatically in: 3 sec ")):V("",!0),e("div",W,[t[7]||(t[7]=e("label",{class:"mb-2 font-semibold"},"Open door automatically on gas detection",-1)),x(e("input",{type:"checkbox",onChange:t[0]||(t[0]=n=>_(n.target.checked)),"onUpdate:modelValue":t[1]||(t[1]=n=>b(s)?s.value=n:null),class:"toggle toggle-secondary"},null,544),[[P,o(s)]]),o(s)?(r(),a("p",F," The door will open automatically on gas detection ")):(r(),a("p",H," The door will not open automatically on gas detection "))]),e("form",{onSubmit:B(v,["prevent"]),class:"form-control p-8 w-full max-w-sm rounded-xl mx-auto"},[t[8]||(t[8]=e("label",{class:"label"},[e("span",{class:"label-text"},"The new Password")],-1)),x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>b(l)?l.value=n:null),required:"",type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"8",placeholder:"Enter numeric password",class:"input input-bordered w-full max-w-xs"},null,512),[[O,o(l)]]),e("h1",J,"Current password: "+R(o(f)),1),e("button",{type:"submit",disabled:!o(l),class:"btn btn-primary mt-4 w-full"},"Set New Password",8,K)],32)])])}}};export{Z as default};

import{_ as D}from"./Bcjc7qDL.js";import{s as d,l as C,k as N,m as S,r as p,u as G,f as M,c as r,a as t,b as T,w as V,g as q,n as O,h as o,i as b,p as P,q as f,j as B,v as R,t as j,o as i}from"./Dzlzx0Ca.js";const E={class:"min-h-screen flex flex-col"},U={class:"container mx-auto p-4"},z={class:"flex"},A={class:"flex-1 flex-col flex items-center mt-30"},I=["disabled"],L={key:0,class:"text-warning text-lg mt-4"},W={key:1,class:"text-white text-lg mt-4"},F={class:"flex flex-col items-center mt-8"},H=["disabled"],J={key:0,class:"mt-2 text-green-400"},K={key:1,class:"mt-2 text-red-400"},Q={class:"text-center m-3 mb-0"},X=["disabled"],ee={__name:"door",setup(Y){const{isOpen:s,password:w}=d(C()),{alarm:g}=d(N()),{useGasDoor:l}=d(S()),n=p(""),u=p(!1),{publish:c}=G(),{topic:m}=d(M()),_=p(!0),h=async()=>{u.value=!0,setTimeout(()=>{_.value=!1,u.value=!1},3500),c(m.value,"door/open")},v=x=>{c(m.value,x?"gas/door/on":"gas/door/off")},y=async()=>{c(m.value,"door/"+n.value)};return(x,e)=>{const k=D;return i(),r("div",E,[t("div",U,[t("div",z,[T(k,{to:"/dashboard"},{default:V(()=>e[3]||(e[3]=[t("h1",{class:"text-3xl font-bold mb-5 cursor-pointer"},[t("i",{class:"bi bi-arrow-left"})],-1)])),_:1}),e[4]||(e[4]=t("h1",{class:"text-3xl font-bold ms-5"},"Door",-1))]),e[5]||(e[5]=t("hr",null,null,-1))]),t("div",A,[t("button",{onClick:h,disabled:o(s),class:O(["relative btn border-0 flex items-center justify-center transition duration-300 w-50 h-50 transform font-bold text-2xl text-white p-4 rounded-full",o(s)?"bg-gray-500 shadow-none opacity-50 cursor-not-allowed":"bg-green-500 hover:shadow-lg hover:bg-green-600 cursor-pointer"])},e[6]||(e[6]=[t("i",{class:"bi bi-power text-6xl font-bold"},null,-1)]),10,I),o(s)&&o(g)&&o(l)?(i(),r("p",L," WARNING: Door is open! Gas is detected! ")):o(s)?(i(),r("p",W," Door will be closed automatically in: 3 sec ")):q("",!0),t("div",F,[e[7]||(e[7]=t("label",{class:"mb-2 font-semibold"},"Open door automatically on gas detection",-1)),b(t("input",{type:"checkbox",onChange:e[0]||(e[0]=a=>v(a.target.checked)),"onUpdate:modelValue":e[1]||(e[1]=a=>f(l)?l.value=a:null),class:"toggle toggle-secondary",disabled:o(s)&&o(u)},null,40,H),[[P,o(l)]]),o(l)?(i(),r("p",J," The door will open automatically on gas detection ")):(i(),r("p",K," The door will not open automatically on gas detection "))]),t("form",{onSubmit:B(y,["prevent"]),class:"form-control p-8 w-full max-w-sm rounded-xl mx-auto"},[e[8]||(e[8]=t("label",{class:"label"},[t("span",{class:"label-text"},"The new Password")],-1)),b(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>f(n)?n.value=a:null),required:"",type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"8",placeholder:"Enter numeric password",class:"input input-bordered w-full max-w-xs"},null,512),[[R,o(n)]]),t("h1",Q,"Current password: "+j(o(w)),1),t("button",{type:"submit",disabled:!o(n),class:"btn btn-primary mt-4 w-full"},"Set New Password",8,X)],32)])])}}};export{ee as default};
